# –ü—Ä–∏–Ω—Ü–∏–ø—ã –û—Ç–ª–∞–¥–∫–∏ –ö–Ω–æ–ø–æ–∫ –∏ API

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω script.js

1. **–î–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏** - —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å –≤ console –∫–∞–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏—Å–∫–∞–ª–∏—Å—å

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–æ–ø–æ–∫** - —Ç—Ä–µ–±—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ID –≤ HTML:
   - `#authButton` - –∫–Ω–æ–ø–∫–∞ –í–æ–π—Ç–∏
   - `#authModal` - –º–æ–¥–∞–ª—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - `#loginForm` - —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
   - `#registerForm` - —Ñ–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

3. **–û–≥–æ–≤–æ—Ä–∫–∞** - –ø–µ—Ä–µ–¥–∞—ç—Ç–µ—Å—å `e.preventDefault()` –≤–æ –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö

## –ö–∞–∫ –ù–æ—Ä–º–∞–ª—å–Ω–æ –¥–æ–ª–∂–Ω–∞ –†–∞–±–æ—Ç–∞—Ç—å

### –ö–Ω–æ–ø–∫–∞ "–í—Ö–æ–¥"

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –∫–Ω–æ–ø–∫—É **"–í—Ö–æ–¥"** ("–í–æ–π—Ç–∏")
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ `#authModal`
3. –£–∑—ç—Ä –≤—ã–±–∏—Ä–∞–µ—Ç –≤–∫–ª–∞–¥–∫—É **"–õ–æ–≥–∏–Ω"**
4. –ó–∞–ø–æ–ª–Ω—è–µ—Ç –±–ª–∞–Ω–∫–∞—é:
   - **–õ–æ–≥–∏–Ω:** `user` (–∏–ª–∏ `moderator`)
   - **–ü–∞—Ä–æ–ª—å:** `1234`
5. –ù–∞–∂–∏–º–∞–µ—Ç **"–í–æ–π—Ç–∏"**
6. **API –∑–∞–ø—Ä–æ—Å:** `POST /api/v1/auth/login` ‚Üí FastAPI
7. **–û—Ç–≤–µ—Ç:** `{"access_token": "...", "user_id": 1, ...}`
8. **–î–µ–π—Å—Ç–≤–∏—è:**
   - Token —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `localStorage.auth_token`
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `checkAuthState()`
   - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è UI (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–í—Ö–æ–¥")
   - –ó–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å
9. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–Ω–æ–ø–∫–∞ "–í—Ö–æ–¥" –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ badge —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üîç –ö–∞–∫ –û—Ç–ª–∞–∂–∏–≤–∞—Ç—å

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ DevTools

```
F12 –∏–ª–∏ Ctrl+Shift+I (Windows/Linux)
Cmd+Option+I (Mac)
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Console

**–í–∫–ª–∞–¥–∫–∞ "Console"** –≤ DevTools

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –õ–æ–≥–∏ –ø—Ä–∏ –ó–∞–≥—Ä—É–∑–∫–µ

–õ–æ–≥ —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:

```
üîß DOMContentLoaded: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...
üéØ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è event listeners...
‚úì –ù–∞–π–¥–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ #authButton
‚úì –ù–∞–π–¥–µ–Ω–∞ –º–æ–¥–∞–ª—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ #authModal
‚úì –ù–∞–π–¥–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–∏ #closeAuthModal
‚úì –ù–∞–π–¥–µ–Ω–∞ —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ #loginForm
‚úì –ù–∞–π–¥–µ–Ω–∞ —Ñ–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ #registerForm
‚úì Event listeners –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ
‚úì –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
```

### –ï—Å–ª–∏ –í—ã –í–∏–¥–∏—Ç–µ ‚ùå –û—à–∏–±–∫–∏

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:**
```
‚ö†Ô∏è –ö–Ω–æ–ø–∫–∞ #authButton –ù–ï –Ω–∞–π–¥–µ–Ω–∞ –≤ DOM!
```

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `index.html`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ HTML –µ—Å—Ç—å `<button id="authButton" ...>`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ ID –Ω–∞–ø–∏—Å–∞–Ω **—Ç–æ—á–Ω–æ** –∫–∞–∫ –≤ HTML
4. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+F5, —á—Ç–æ–±—ã –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à)

## –®–∞–≥ 4: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ö–Ω–æ–ø–∫—É "–í—Ö–æ–¥"

### –í Console –í—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —ç–ª–µ–º–µ–Ω—Ç
document.getElementById('authButton')
// –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è: <button id="authButton" ...></button>

// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ event listener
document.getElementById('authButton').click()
// –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –º–æ–¥–∞–ª—å
```

### –ï—Å–ª–∏ –ú–æ–¥–∞–ª—å –û—Ç–∫—Ä—ã–ª–∞—Å—å:
‚úÖ **–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!** –ö–Ω–æ–ø–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ `showAuthModal()`

### –ï—Å–ª–∏ –ú–æ–¥–∞–ª—å –ù–ï –û—Ç–∫—Ä—ã–ª–∞—Å—å:
‚ùå **–ü—Ä–æ–±–ª–µ–º–∞ –≤ Event Listeners**

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Console:
```javascript
// –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ listeners
initEventListeners()

// –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞
document.getElementById('authButton').click()
```

## –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### –í Console:

```javascript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL API
console.log(API_ENDPOINTS.auth.login)
// –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: http://localhost:8000/api/v1/auth/login

// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ —Ç–æ–∫–µ–Ω
console.log(localStorage.getItem('auth_token'))
// null –µ—Å–ª–∏ –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã, –∏–ª–∏ —Ç–æ–∫–µ–Ω –µ—Å–ª–∏ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã
```

### –ü–æ–ø—Ä–æ–±—É–π—Ç–µ Login –í—Ä—É—á–Ω—É—é:

```javascript
login('user', '1234')
// –ó–∞–ø—É—Å—Ç–∏—Ç—Å—è –≤—Ö–æ–¥, –≤—ã —É–≤–∏–¥–∏—Ç–µ –ª–æ–≥–∏ –≤ console
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**
```
API Request: POST http://localhost:8000/api/v1/auth/login
‚úì –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, user!
```

## –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –í—Å–µ –û—Å—Ç–∞–ª—å–Ω—ã–µ –ö–Ω–æ–ø–∫–∏

### –í–∫–ª–∞–¥–∫–∏ –ù–∞–≤–∏–≥–∞—Ü–∏–∏
```javascript
document.querySelectorAll('.pill-button[data-pick]').length
// –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: 4 (–í—Å–µ, –•–∏—Ç—ã, –ù–æ–≤–∏–Ω–∫–∏, –ö–ª–∞—Å—Å–∏–∫–∞)
```

### –§–∏–ª—å—Ç—Ä—ã –û—Ü–µ–Ω–æ–∫
```javascript
document.querySelectorAll('.chip-button[data-rating]').length
// –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: 4 (–í—Å–µ, 8+, 7+, 6+)
```

### –ü–æ–∏—Å–∫
```javascript
document.getElementById('searchInput')
// –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ñ–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞
```

## üìã –ü–æ–ª–Ω—ã–π –ß–µ–∫–ª–∏—Å—Ç

- [ ] –í Console –≤–∏–¥–Ω—ã –ª–æ–≥–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ ‚úì
- [ ] –ö–Ω–æ–ø–∫–∞ "–í—Ö–æ–¥" –Ω–∞–π–¥–µ–Ω–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ ‚úì
- [ ] –ú–æ–¥–∞–ª—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ –∫–ª–∏–∫—É ‚úì
- [ ] –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ ‚úì
- [ ] API –∑–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ `/api/v1/auth/login` ‚úì
- [ ] –û—Ç–≤–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å —Ç–æ–∫–µ–Ω–æ–º ‚úì
- [ ] –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚úì
- [ ] –ö–Ω–æ–ø–∫–∞ "–í—Ö–æ–¥" —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚úì
- [ ] –ö–Ω–æ–ø–∫–∞ "–í—ã—Ö–æ–¥" —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úì
- [ ] –§–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç (–•–∏—Ç—ã, –ù–æ–≤–∏–Ω–∫–∏, –ö–ª–∞—Å—Å–∏–∫–∞) ‚úì
- [ ] –§–∏–ª—å—Ç—Ä—ã –æ—Ü–µ–Ω–æ–∫ —Ä–∞–±–æ—Ç–∞—é—Ç (8+, 7+, 6+) ‚úì
- [ ] –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úì
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞–µ—Ç (‚òÄÔ∏è/üåô) ‚úì
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (‚òÖ) ‚úì
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–Ω–∑–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úì
- [ ] –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ–∏–ª—å–º—ã ‚úì
- [ ] –ü—Ä–æ—Ñ–∏–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚úì

## üöÄ –ï—Å–ª–∏ –í—Å–µ –ï—â–µ –ù–µ –†–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ FastAPI —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   curl http://localhost:8000/api/v1/auth/login
   # –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É METHOD NOT ALLOWED (–Ω–µ GET)
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   ```bash
   python
   >>> from app.models import User
   >>> User.query.filter_by(username='user').first()
   # –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –æ–±—ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   ```

3. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É:**
   - Ctrl+F5 (Windows/Linux)
   - Cmd+Shift+R (Mac)
   - –≠—Ç–æ –æ—á–∏—â–∞–µ—Ç –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã:**
   - DevTools ‚Üí Network (–≤–∫–ª–∞–¥–∫–∞)
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏
   - –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `/api/v1/auth/login`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∏ –æ—Ç–≤–µ—Ç

## –û–∂–∏–¥–∞–µ–º—ã–π –°–µ—Ç–µ–≤–æ–π –ó–∞–ø—Ä–æ—Å

```
Method: POST
URL: http://localhost:8000/api/v1/auth/login
Headers:
  Content-Type: application/json
Body:
  {"username":"user","password":"1234"}

Response Status: 200
Response Body:
  {
    "access_token": "eyJhbGc...",
    "user_id": 1,
    "username": "user",
    "is_superuser": false
  }
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –û—à–∏–±–∫–∏ –∏ –†–µ—à–µ–Ω–∏—è

### "–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `user` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î
- –ü–∞—Ä–æ–ª—å `1234` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ `moderator` / `1234`

### "Network Error" –∏–ª–∏ "Failed to fetch"
- FastAPI —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL API
- CORS –ø—Ä–æ–±–ª–µ–º—ã

### –ö–Ω–æ–ø–∫–∞ –≤–æ–æ–±—â–µ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç
- JavaScript –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è
- –ï—Å—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ script.js
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Console –Ω–∞ –æ—à–∏–±–∫–∏

### –ú–æ–¥–∞–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –Ω–æ —Ñ–æ—Ä–º–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ form –∏–º–µ–µ—Ç `id="loginForm"`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ inputs –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ID:
  - `#loginUsername`
  - `#loginPassword`

---

**–û—Ç–ª–∞–¥–∫–∞ –≥–æ—Ç–æ–≤–∞! üîß**
