# app/utils/data_loader.py
import logging
import hashlib
from sqlalchemy.orm import Session
from sqlalchemy.exc import IntegrityError
from app.database.database import SessionLocal
from app.models.movies import Movie
from app.models.picks import Pick
from app.models.movie_picks import MoviePick
from app.models.users import User

logger = logging.getLogger(__name__)

def get_password_hash(password: str) -> str:
    """–ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª—è (–¥–ª—è –¥–µ–º–æ-—Ü–µ–ª–µ–π)"""
    # –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: from passlib.context import CryptContext
    # pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")
    # return pwd_context.hash(password)
    return hashlib.sha256(password.encode()).hexdigest()

def load_initial_movies():
    """–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤ –≤ –ë–î"""
    session = SessionLocal()
    try:
        # –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
        user_count = session.query(User).count()
        
        if user_count == 0:
            logger.info("üë§ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...")
            
            # –°–æ–∑–¥–∞–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
            admin = User(
                username="admin",
                email="admin@kinovzor.ru",
                password_hash=get_password_hash("1234"),  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: password_hash –≤–º–µ—Å—Ç–æ hashed_password
                is_active=True,
                is_superuser=True
            )
            session.add(admin)
            
            # –°–æ–∑–¥–∞–µ–º –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            user = User(
                username="user",
                email="user@kinovzor.ru",
                password_hash=get_password_hash("1234"),  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
                is_active=True,
                is_superuser=False
            )
            session.add(user)
            
            # –°–æ–∑–¥–∞–µ–º –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞
            moderator = User(
                username="moderator",
                email="moderator@kinovzor.ru",
                password_hash=get_password_hash("1234"),  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
                is_active=True,
                is_superuser=False
            )
            session.add(moderator)
            
            session.commit()
            logger.info("‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã")
        
        # –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–∞–∫ created_by
        admin_user = session.query(User).filter(User.username == "admin").first()
        created_by_id = admin_user.id if admin_user else 1
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Ñ–∏–ª—å–º—ã –≤ –ë–î
        movie_count = session.query(Movie).count()
        
        if movie_count > 0:
            logger.info(f"‚úÖ –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ –µ—Å—Ç—å {movie_count} —Ñ–∏–ª—å–º–æ–≤")
            # –û–±–Ω–æ–≤–ª—è–µ–º created_by –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∏–ª—å–º–æ–≤
            movies = session.query(Movie).filter(Movie.created_by == None).all()
            for movie in movies:
                movie.created_by = created_by_id
            session.commit()
            return
        
        logger.info("üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö...")
        
        # –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏–ª—å–º—ã –∏–∑ –≤–∞—à–µ–≥–æ —Å–ø–∏—Å–∫–∞
        initial_movies = [
            Movie(
                title="–ü–æ–±–µ–≥ –∏–∑ –®–æ—É—à–µ–Ω–∫–∞",
                year=1994,
                rating=9.3,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film1/200/300",
                overview="–ë–∞–Ω–∫–∏—Ä –≠–Ω–¥–∏ –î—é—Ñ—Ä–µ–π–Ω, –æ–±–≤–∏–Ω—ë–Ω–Ω—ã–π –≤ —É–±–∏–π—Å—Ç–≤–µ –∂–µ–Ω—ã –∏ –µ—ë –ª—é–±–æ–≤–Ω–∏–∫–∞, –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ç—é—Ä—å–º—É –®–æ—É—à–µ–Ω–∫.",
                created_by=created_by_id
            ),
            Movie(
                title="–¢—ë–º–Ω—ã–π —Ä—ã—Ü–∞—Ä—å",
                year=2008,
                rating=9.0,
                genre="–ë–æ–µ–≤–∏–∫",
                poster_url="https://picsum.photos/seed/film2/200/300",
                overview="–ë—ç—Ç–º–µ–Ω –≤—Å—Ç—É–ø–∞–µ—Ç –≤ —Å–º–µ—Ä—Ç–µ–ª—å–Ω—É—é –∏–≥—Ä—É —Å –î–∂–æ–∫–µ—Ä–æ–º, —á—å—è —Ü–µ–ª—å ‚Äî –ø–æ–≥—Ä—É–∑–∏—Ç—å –≥–æ—Ä–æ–¥ –≤ —Ö–∞–æ—Å.",
                created_by=created_by_id
            ),
            Movie(
                title="–ù–∞—á–∞–ª–æ",
                year=2010,
                rating=8.8,
                genre="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞",
                poster_url="https://picsum.photos/seed/film3/200/300",
                overview="–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–æ—Ä, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ –ø—Ä–æ–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤ —Å–Ω—ã, –ø–æ–ª—É—á–∞–µ—Ç —à–∞–Ω—Å –Ω–∞ –∏—Å–∫—É–ø–ª–µ–Ω–∏–µ.",
                created_by=created_by_id
            ),
            Movie(
                title="–ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä",
                year=2014,
                rating=8.6,
                genre="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞",
                poster_url="https://picsum.photos/seed/film4/200/300",
                overview="–ö–æ–º–∞–Ω–¥–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —á–µ—Ä–≤–æ—Ç–æ—á–∏–Ω—É –≤ –ø–æ–∏—Å–∫–∞—Ö –Ω–æ–≤–æ–≥–æ –¥–æ–º–∞ –¥–ª—è —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞.",
                created_by=created_by_id
            ),
            Movie(
                title="–§–æ—Ä—Ä–µ—Å—Ç –ì–∞–º–ø",
                year=1994,
                rating=8.9,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film5/200/300",
                overview="–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å—Ç–æ–¥—É—à–Ω–æ–≥–æ –§–æ—Ä—Ä–µ—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–≤–∏–¥–µ—Ç–µ–ª–µ–º –≤–∞–∂–Ω–µ–π—à–∏—Ö —Å–æ–±—ã—Ç–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏ –°–®–ê.",
                created_by=created_by_id
            ),
            Movie(
                title="–ú–∞—Ç—Ä–∏—Ü–∞",
                year=1999,
                rating=8.7,
                genre="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞",
                poster_url="https://picsum.photos/seed/film6/200/300",
                overview="–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –ù–µ–æ —É–∑–Ω–∞—ë—Ç, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å ‚Äî –≤—Å–µ–≥–æ –ª–∏—à—å —Å–∏–º—É–ª—è—Ü–∏—è, —Å–æ–∑–¥–∞–Ω–Ω–∞—è –º–∞—à–∏–Ω–∞–º–∏.",
                created_by=created_by_id
            ),
            Movie(
                title="–û–¥–Ω–∞–∂–¥—ã –≤‚Ä¶ –ì–æ–ª–ª–∏–≤—É–¥–µ",
                year=2019,
                rating=7.7,
                genre="–ö–æ–º–µ–¥–∏—è",
                poster_url="https://picsum.photos/seed/film7/200/300",
                overview="–ê–∫—Ç—ë—Ä –†–∏–∫ –î–∞–ª—Ç–æ–Ω –∏ –µ–≥–æ –¥—É–±–ª—ë—Ä –ö–ª–∏—Ñ—Ñ –ë—É—Ç –ø—ã—Ç–∞—é—Ç—Å—è –Ω–∞–π—Ç–∏ —Å–µ–±—è –≤ –º–µ–Ω—è—é—â–µ–º—Å—è –ì–æ–ª–ª–∏–≤—É–¥–µ 60-—Ö.",
                created_by=created_by_id
            ),
            Movie(
                title="–ü–∞—Ä–∞–∑–∏—Ç—ã",
                year=2019,
                rating=8.5,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film8/200/300",
                overview="–ë–µ–¥–Ω–∞—è —Å–µ–º—å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –º–µ—Å—Ç–∞ –≤ –¥–æ–º–µ –±–æ–≥–∞—Ç—ã—Ö, –ø—Ä–∏—Ç–≤–æ—Ä—è—è—Å—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º–∏.",
                created_by=created_by_id
            ),
            Movie(
                title="–ë–µ–≥—É—â–∏–π –ø–æ –ª–µ–∑–≤–∏—é 2049",
                year=2017,
                rating=8.0,
                genre="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞",
                poster_url="https://picsum.photos/seed/film9/200/300",
                overview="–ù–æ–≤—ã–π –±–µ–≥—É—â–∏–π –ø–æ –ª–µ–∑–≤–∏—é —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç —Ç–∞–π–Ω—É, —Å–ø–æ—Å–æ–±–Ω—É—é –∏–∑–º–µ–Ω–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è –ª—é–¥–µ–π –∏ —Ä–µ–ø–ª–∏–∫–∞–Ω—Ç–æ–≤.",
                created_by=created_by_id
            ),
            Movie(
                title="–ö—Ä–∏–º–∏–Ω–∞–ª—å–Ω–æ–µ —á—Ç–∏–≤–æ",
                year=1994,
                rating=8.9,
                genre="–ë–æ–µ–≤–∏–∫",
                poster_url="https://picsum.photos/seed/film10/200/300",
                overview="–ü–µ—Ä–µ–ø–ª–µ—Ç–∞—é—â–∏–µ—Å—è –∏—Å—Ç–æ—Ä–∏–∏ –≥–∞–Ω–≥—Å—Ç–µ—Ä–æ–≤, –±–æ–∫—Å—ë—Ä–∞ –∏ –≥—Ä–∞–±–∏—Ç–µ–ª–µ–π –≤ –õ–æ—Å-–ê–Ω–¥–∂–µ–ª–µ—Å–µ.",
                created_by=created_by_id
            ),
            Movie(
                title="–ö—Ä—ë—Å—Ç–Ω—ã–π –æ—Ç–µ—Ü",
                year=1972,
                rating=9.2,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film11/200/300",
                overview="–°–∞–≥–∞ –æ –º–∞—Ñ–∏–æ–∑–Ω–æ–º –∫–ª–∞–Ω–µ –ö–æ—Ä–ª–µ–æ–Ω–µ –∏ –ø–µ—Ä–µ–¥–∞—á–µ –≤–ª–∞—Å—Ç–∏ –æ—Ç –æ—Ç—Ü–∞ –∫ —Å—ã–Ω—É.",
                created_by=created_by_id
            ),
            Movie(
                title="–ö—Ä—ë—Å—Ç–Ω—ã–π –æ—Ç–µ—Ü 2",
                year=1974,
                rating=9.0,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film12/200/300",
                overview="–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –º–æ–ª–æ–¥–æ–≥–æ –í–∏—Ç–æ –∏ –≤–∑—Ä–æ—Å–ª–µ–Ω–∏—è –ú–∞–π–∫–ª–∞ –ö–æ—Ä–ª–µ–æ–Ω–µ.",
                created_by=created_by_id
            ),
            Movie(
                title="–°–ø–∏—Å–æ–∫ –®–∏–Ω–¥–ª–µ—Ä–∞",
                year=1993,
                rating=9.0,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film13/200/300",
                overview="–ù–µ–º–µ—Ü–∫–∏–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫ —Å–ø–∞—Å–∞–µ—Ç —Å–æ—Ç–Ω–∏ –µ–≤—Ä–µ–µ–≤ –≤–æ –≤—Ä–µ–º—è –•–æ–ª–æ–∫–æ—Å—Ç–∞.",
                created_by=created_by_id
            ),
            Movie(
                title="–ó–µ–ª—ë–Ω–∞—è –º–∏–ª—è",
                year=1999,
                rating=9.0,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film14/200/300",
                overview="–¢—é—Ä–µ–º–Ω—ã–π –Ω–∞–¥–∑–∏—Ä–∞—Ç–µ–ª—å –≤—Å—Ç—Ä–µ—á–∞–µ—Ç –æ—Å—É–∂–¥—ë–Ω–Ω–æ–≥–æ —Å –Ω–µ–æ–±—ã—á–Ω—ã–º –¥–∞—Ä–æ–º.",
                created_by=created_by_id
            ),
            Movie(
                title="–í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü: –ë—Ä–∞—Ç—Å—Ç–≤–æ –ö–æ–ª—å—Ü–∞",
                year=2001,
                rating=8.8,
                genre="–§—ç–Ω—Ç–µ–∑–∏",
                poster_url="https://picsum.photos/seed/film15/200/300",
                overview="–•–æ–±–±–∏—Ç –§—Ä–æ–¥–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ–ø–∞—Å–Ω–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ, —á—Ç–æ–±—ã —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –ö–æ–ª—å—Ü–æ –í—Å–µ–≤–ª–∞—Å—Ç—å—è.",
                created_by=created_by_id
            ),
            Movie(
                title="–í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü: –î–≤–µ –∫—Ä–µ–ø–æ—Å—Ç–∏",
                year=2002,
                rating=8.8,
                genre="–§—ç–Ω—Ç–µ–∑–∏",
                poster_url="https://picsum.photos/seed/film16/200/300",
                overview="–ë—Ä–∞—Ç—Å—Ç–≤–æ —Ä–∞—Å–ø–∞–ª–æ—Å—å, –Ω–æ –±–æ—Ä—å–±–∞ —Å —Å–∏–ª–∞–º–∏ –°–∞—É—Ä–æ–Ω–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ—Ä–æ–Ω—Ç–∞—Ö.",
                created_by=created_by_id
            ),
            Movie(
                title="–í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü: –í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ—Ä–æ–ª—è",
                year=2003,
                rating=8.9,
                genre="–§—ç–Ω—Ç–µ–∑–∏",
                poster_url="https://picsum.photos/seed/film17/200/300",
                overview="–§–∏–Ω–∞–ª—å–Ω–∞—è –±–∏—Ç–≤–∞ –∑–∞ –°—Ä–µ–¥–∏–∑–µ–º—å–µ –∏ –ø–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–ø—ã—Ç–∫–∞ —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –ö–æ–ª—å—Ü–æ.",
                created_by=created_by_id
            ),
            Movie(
                title="–ë–æ–π—Ü–æ–≤—Å–∫–∏–π –∫–ª—É–±",
                year=1999,
                rating=8.8,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film18/200/300",
                overview="–û—Ñ–∏—Å–Ω—ã–π —Ä–∞–±–æ—Ç–Ω–∏–∫ —Å–æ–∑–¥–∞—ë—Ç –ø–æ–¥–ø–æ–ª—å–Ω—ã–π –∫–ª—É–±, –≥–¥–µ –º—É–∂—á–∏–Ω—ã –∏–∑–±–∏–≤–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ —Ä–∞–¥–∏ –æ—â—É—â–µ–Ω–∏—è –∂–∏–∑–Ω–∏.",
                created_by=created_by_id
            ),
            Movie(
                title="–ü–∏—Ä–∞—Ç—ã –ö–∞—Ä–∏–±—Å–∫–æ–≥–æ –º–æ—Ä—è: –ü—Ä–æ–∫–ª—è—Ç–∏–µ –ß—ë—Ä–Ω–æ–π –∂–µ–º—á—É–∂–∏–Ω—ã",
                year=2003,
                rating=8.0,
                genre="–ë–æ–µ–≤–∏–∫",
                poster_url="https://picsum.photos/seed/film19/200/300",
                overview="–≠–∫—Å—Ç—Ä–∞–≤–∞–≥–∞–Ω—Ç–Ω—ã–π –∫–∞–ø–∏—Ç–∞–Ω –î–∂–µ–∫ –í–æ—Ä–æ–±–µ–π –≤–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –≤ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ —Å –ø—Ä–æ–∫–ª—è—Ç—ã–º–∏ –ø–∏—Ä–∞—Ç–∞–º–∏.",
                created_by=created_by_id
            ),
            Movie(
                title="–ì–ª–∞–¥–∏–∞—Ç–æ—Ä",
                year=2000,
                rating=8.5,
                genre="–ë–æ–µ–≤–∏–∫",
                poster_url="https://picsum.photos/seed/film20/200/300",
                overview="–†–∏–º—Å–∫–∏–π –ø–æ–ª–∫–æ–≤–æ–¥–µ—Ü —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ä–∞–±–æ–º –∏ –≤—ã—Ö–æ–¥–∏—Ç –Ω–∞ –∞—Ä–µ–Ω—É, —á—Ç–æ–±—ã –æ—Ç–æ–º—Å—Ç–∏—Ç—å –∑–∞ —Å–µ–º—å—é.",
                created_by=created_by_id
            ),
            Movie(
                title="–¢–∏—Ç–∞–Ω–∏–∫",
                year=1997,
                rating=8.0,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film21/200/300",
                overview="–ò—Å—Ç–æ—Ä–∏—è –ª—é–±–≤–∏ –Ω–∞ —Ñ–æ–Ω–µ –∫—Ä—É—à–µ–Ω–∏—è –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ –ª–∞–π–Ω–µ—Ä–∞ ¬´–¢–∏—Ç–∞–Ω–∏–∫¬ª.",
                created_by=created_by_id
            ),
            Movie(
                title="–ò–Ω–¥–∏–∞–Ω–∞ –î–∂–æ–Ω—Å: –í –ø–æ–∏—Å–∫–∞—Ö —É—Ç—Ä–∞—á–µ–Ω–Ω–æ–≥–æ –∫–æ–≤—á–µ–≥–∞",
                year=1981,
                rating=8.4,
                genre="–ë–æ–µ–≤–∏–∫",
                poster_url="https://picsum.photos/seed/film22/200/300",
                overview="–ê—Ä—Ö–µ–æ–ª–æ–≥ –ò–Ω–¥–∏–∞–Ω–∞ –î–∂–æ–Ω—Å –ø—ã—Ç–∞–µ—Ç—Å—è –æ–ø–µ—Ä–µ–¥–∏—Ç—å –Ω–∞—Ü–∏—Å—Ç–æ–≤ –≤ –ø–æ–∏—Å–∫–∞—Ö –ö–æ–≤—á–µ–≥–∞ –ó–∞–≤–µ—Ç–∞.",
                created_by=created_by_id
            ),
            Movie(
                title="–ù–∞–∑–∞–¥ –≤ –±—É–¥—É—â–µ–µ",
                year=1985,
                rating=8.5,
                genre="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞",
                poster_url="https://picsum.photos/seed/film23/200/300",
                overview="–ü–æ–¥—Ä–æ—Å—Ç–æ–∫ –ú–∞—Ä—Ç–∏ –ú–∞–∫–§–ª–∞–π —Å–ª—É—á–∞–π–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø—Ä–æ—à–ª–æ–µ –Ω–∞ –º–∞—à–∏–Ω–µ –≤—Ä–µ–º–µ–Ω–∏.",
                created_by=created_by_id
            ),
            Movie(
                title="–¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä 2: –°—É–¥–Ω—ã–π –¥–µ–Ω—å",
                year=1991,
                rating=8.5,
                genre="–ë–æ–µ–≤–∏–∫",
                poster_url="https://picsum.photos/seed/film24/200/300",
                overview="–ö–∏–±–æ—Ä–≥ –∏–∑ –±—É–¥—É—â–µ–≥–æ –¥–æ–ª–∂–µ–Ω –∑–∞—â–∏—Ç–∏—Ç—å –º–∞–ª—å—á–∏–∫–∞ –î–∂–æ–Ω–∞ –ö–æ–Ω–Ω–æ—Ä–∞ –æ—Ç –±–æ–ª–µ–µ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–π –º–∞—à–∏–Ω—ã —É–±–∏–π—Å—Ç–≤–∞.",
                created_by=created_by_id
            ),
            Movie(
                title="–ß—É–∂–æ–π",
                year=1979,
                rating=8.4,
                genre="–£–∂–∞—Å—ã",
                poster_url="https://picsum.photos/seed/film25/200/300",
                overview="–≠–∫–∏–ø–∞–∂ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ—Ä–∞–±–ª—è —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π —Ñ–æ—Ä–º–æ–π –∂–∏–∑–Ω–∏.",
                created_by=created_by_id
            ),
            Movie(
                title="–ß—É–∂–∏–µ",
                year=1986,
                rating=8.3,
                genre="–ë–æ–µ–≤–∏–∫",
                poster_url="https://picsum.photos/seed/film26/200/300",
                overview="–†–∏–ø–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ –ø–ª–∞–Ω–µ—Ç—É, –≥–¥–µ –≤–ø–µ—Ä–≤—ã–µ —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –∫—Å–µ–Ω–æ–º–æ—Ä—Ñ–æ–º, –Ω–æ —Ç–µ–ø–µ—Ä—å —Ç–∞–º —Ü–µ–ª–∞—è –∫–æ–ª–æ–Ω–∏—è.",
                created_by=created_by_id
            ),
            Movie(
                title="–ì–æ—Ä–æ–¥ –ë–æ–≥–∞",
                year=2002,
                rating=8.6,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film27/200/300",
                overview="–ò—Å—Ç–æ—Ä–∏—è —Ä–æ—Å—Ç–∞ –ø—Ä–µ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤ —Ç—Ä—É—â–æ–±–∞—Ö –†–∏–æ-–¥–µ-–ñ–∞–Ω–µ–π—Ä–æ –≥–ª–∞–∑–∞–º–∏ –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤.",
                created_by=created_by_id
            ),
            Movie(
                title="–ö—Ä–∞—Å–æ—Ç–∞ –ø–æ-–∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏",
                year=1999,
                rating=8.4,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film28/200/300",
                overview="–ö—Ä–∏–∑–∏—Å —Å—Ä–µ–¥–Ω–µ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞ —Ç–æ–ª–∫–∞–µ—Ç –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è –Ω–∞ –ø–æ–ø—ã—Ç–∫—É –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤–æ—é –∂–∏–∑–Ω—å.",
                created_by=created_by_id
            ),
            Movie(
                title="–ë–æ–ª—å—à–æ–π –õ–µ–±–æ–≤—Å–∫–∏",
                year=1998,
                rating=8.1,
                genre="–ö–æ–º–µ–¥–∏—è",
                poster_url="https://picsum.photos/seed/film29/200/300",
                overview="–§–ª–µ–≥–º–∞—Ç–∏—á–Ω—ã–π –ß—É–≤–∞–∫ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤—Ç—è–Ω—É—Ç—ã–º –≤ –¥–µ—Ç–µ–∫—Ç–∏–≤–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏ —Å –ª–∏—á–Ω–æ—Å—Ç—å—é.",
                created_by=created_by_id
            ),
            Movie(
                title="–ê–º–µ–ª–∏",
                year=2001,
                rating=8.3,
                genre="–ö–æ–º–µ–¥–∏—è",
                poster_url="https://picsum.photos/seed/film30/200/300",
                overview="–ó–∞—Å—Ç–µ–Ω—á–∏–≤–∞—è –ê–º–µ–ª–∏ —Ä–µ—à–∞–µ—Ç —Ç–∞–π–Ω–æ –ø–æ–º–æ–≥–∞—Ç—å –ª—é–¥—è–º –≤–æ–∫—Ä—É–≥ –∏ –º–µ–Ω—è—Ç—å –∏—Ö –∂–∏–∑–Ω—å –∫ –ª—É—á—à–µ–º—É.",
                created_by=created_by_id
            ),
            Movie(
                title="–ú–æ–ª—á–∞–Ω–∏–µ —è–≥–Ω—è—Ç",
                year=1991,
                rating=8.6,
                genre="–¢—Ä–∏–ª–ª–µ—Ä",
                poster_url="https://picsum.photos/seed/film31/200/300",
                overview="–ú–æ–ª–æ–¥–∞—è –∞–≥–µ–Ω—Ç –§–ë–† –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∑–∞ –ø–æ–º–æ—â—å—é –∫ –∑–∞–∫–ª—é—á—ë–Ω–Ω–æ–º—É –º–∞–Ω—å—è–∫—É –ì–∞–Ω–Ω–∏–±–∞–ª—É –õ–µ–∫—Ç–µ—Ä—É.",
                created_by=created_by_id
            ),
            Movie(
                title="–°–µ–º—å",
                year=1995,
                rating=8.6,
                genre="–¢—Ä–∏–ª–ª–µ—Ä",
                poster_url="https://picsum.photos/seed/film32/200/300",
                overview="–î–≤–∞ –¥–µ—Ç–µ–∫—Ç–∏–≤–∞ –æ—Ö–æ—Ç—è—Ç—Å—è –∑–∞ —Å–µ—Ä–∏–π–Ω—ã–º —É–±–∏–π—Ü–µ–π, –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–º—Å—è —Å–µ–º—å—é —Å–º–µ—Ä—Ç–Ω—ã–º–∏ –≥—Ä–µ—Ö–∞–º–∏.",
                created_by=created_by_id
            ),
            Movie(
                title="–ü—Ä–µ—Å—Ç–∏–∂",
                year=2006,
                rating=8.5,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film33/200/300",
                overview="–î–≤–∞ —Ñ–æ–∫—É—Å–Ω–∏–∫–∞ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç —Å–æ–ø–µ—Ä–Ω–∏—á–µ—Å—Ç–≤–æ –≤ —Ä–∞–∑—Ä—É—à–∏—Ç–µ–ª—å–Ω—É—é –æ–¥–µ—Ä–∂–∏–º–æ—Å—Ç—å.",
                created_by=created_by_id
            ),
            Movie(
                title="–û—Å—Ç—Ä–æ–≤ –ø—Ä–æ–∫–ª—è—Ç—ã—Ö",
                year=2010,
                rating=8.1,
                genre="–¢—Ä–∏–ª–ª–µ—Ä",
                poster_url="https://picsum.photos/seed/film34/200/300",
                overview="–ú–∞—Ä—à–∞–ª –°–®–ê –ø—Ä–∏–±—ã–≤–∞–µ—Ç –≤ –ø—Å–∏—Ö–∏–∞—Ç—Ä–∏—á–µ—Å–∫—É—é –∫–ª–∏–Ω–∏–∫—É –Ω–∞ –æ—Å—Ç—Ä–æ–≤–µ, —á—Ç–æ–±—ã —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∫–∏.",
                created_by=created_by_id
            ),
            Movie(
                title="–í –¥–∂–∞–∑–µ —Ç–æ–ª—å–∫–æ –¥–µ–≤—É—à–∫–∏",
                year=1959,
                rating=8.5,
                genre="–ö–æ–º–µ–¥–∏—è",
                poster_url="https://picsum.photos/seed/film35/200/300",
                overview="–î–≤–∞ –º—É–∑—ã–∫–∞–Ω—Ç–∞ –ø–µ—Ä–µ–æ–¥–µ–≤–∞—é—Ç—Å—è –∂–µ–Ω—â–∏–Ω–∞–º–∏, —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å—Å—è –æ—Ç –≥–∞–Ω–≥—Å—Ç–µ—Ä–æ–≤.",
                created_by=created_by_id
            ),
            Movie(
                title="–¢–∞–∫—Å–∏—Å—Ç",
                year=1976,
                rating=8.3,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film36/200/300",
                overview="–û–¥–∏–Ω–æ–∫–∏–π —Ç–∞–∫—Å–∏—Å—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ç–µ—Ä—è–µ—Ç —Å–≤—è–∑—å —Å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é –Ω–∞ —Ñ–æ–Ω–µ –Ω–æ—á–Ω–æ–≥–æ –ù—å—é-–ô–æ—Ä–∫–∞.",
                created_by=created_by_id
            ),
            Movie(
                title="–ü—Ä–æ–ª–µ—Ç–∞—è –Ω–∞–¥ –≥–Ω–µ–∑–¥–æ–º –∫—É–∫—É—à–∫–∏",
                year=1975,
                rating=8.7,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film37/200/300",
                overview="–•–∞—Ä–∏–∑–º–∞—Ç–∏—á–Ω—ã–π –∑–∞–∫–ª—é—á—ë–Ω–Ω—ã–π –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø—Å–∏—Ö–∏–∞—Ç—Ä–∏—á–µ—Å–∫—É—é –∫–ª–∏–Ω–∏–∫—É –∏ —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –∂–µ—Å—Ç–∫–∏–º –ø–æ—Ä—è–¥–∫–æ–º.",
                created_by=created_by_id
            ),
            Movie(
                title="–õ–∞-–õ–∞ –õ–µ–Ω–¥",
                year=2016,
                rating=8.0,
                genre="–ú—é–∑–∏–∫–ª",
                poster_url="https://picsum.photos/seed/film38/200/300",
                overview="–î–∂–∞–∑–æ–≤—ã–π –º—É–∑—ã–∫–∞–Ω—Ç –∏ –∞–∫—Ç—Ä–∏—Å–∞ –ø—ã—Ç–∞—é—Ç—Å—è –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –∫–∞—Ä—å–µ—Ä—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è.",
                created_by=created_by_id
            ),
            Movie(
                title="–ë–µ–∑—É–º–Ω—ã–π –ú–∞–∫—Å: –î–æ—Ä–æ–≥–∞ —è—Ä–æ—Å—Ç–∏",
                year=2015,
                rating=8.1,
                genre="–ë–æ–µ–≤–∏–∫",
                poster_url="https://picsum.photos/seed/film39/200/300",
                overview="–í –ø–æ—Å—Ç–∞–ø–æ–∫–∞–ª–∏–ø—Ç–∏—á–µ—Å–∫–æ–π –ø—É—Å—Ç—ã–Ω–µ –±–µ–≥–ª–µ—Ü—ã –ø—ã—Ç–∞—é—Ç—Å—è —É–π—Ç–∏ –æ—Ç —Ç–∏—Ä–∞–Ω–∞ –Ω–∞ –±–æ–µ–≤–æ–π —Ñ—É—Ä–µ.",
                created_by=created_by_id
            ),
            Movie(
                title="–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å",
                year=2010,
                rating=7.7,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film40/200/300",
                overview="–ò—Å—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∏—è Facebook –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –º–µ–∂–¥—É –µ–≥–æ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è–º–∏.",
                created_by=created_by_id
            ),
            Movie(
                title="–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è",
                year=2013,
                rating=7.7,
                genre="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞",
                poster_url="https://picsum.photos/seed/film41/200/300",
                overview="–î–≤–æ–µ –∞—Å—Ç—Ä–æ–Ω–∞–≤—Ç–æ–≤ –ø—ã—Ç–∞—é—Ç—Å—è –≤—ã–∂–∏—Ç—å –ø–æ—Å–ª–µ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ—ã –Ω–∞ –æ—Ä–±–∏—Ç–µ –ó–µ–º–ª–∏.",
                created_by=created_by_id
            ),
            Movie(
                title="–í—ã–∂–∏–≤—à–∏–π",
                year=2015,
                rating=7.8,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film42/200/300",
                overview="–û—Ö–æ—Ç–Ω–∏–∫ –•—å—é –ì–ª–∞—Å—Å, –æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π —É–º–∏—Ä–∞—Ç—å, –ø—ã—Ç–∞–µ—Ç—Å—è –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ —Ç–µ—Ö, –∫—Ç–æ –µ–≥–æ –ø—Ä–µ–¥–∞–ª.",
                created_by=created_by_id
            ),
            Movie(
                title="–î–∂–∞–Ω–≥–æ –æ—Å–≤–æ–±–æ–∂–¥—ë–Ω–Ω—ã–π",
                year=2012,
                rating=8.4,
                genre="–í–µ—Å—Ç–µ—Ä–Ω",
                poster_url="https://picsum.photos/seed/film43/200/300",
                overview="–û—Å–≤–æ–±–æ–∂–¥—ë–Ω–Ω—ã–π —Ä–∞–± –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å –æ—Ö–æ—Ç–Ω–∏–∫–æ–º –∑–∞ –≥–æ–ª–æ–≤–∞–º–∏, —á—Ç–æ–±—ã —Å–ø–∞—Å—Ç–∏ –∂–µ–Ω—É.",
                created_by=created_by_id
            ),
            Movie(
                title="–ú—Å—Ç–∏—Ç–µ–ª–∏: –§–∏–Ω–∞–ª",
                year=2019,
                rating=8.4,
                genre="–ë–æ–µ–≤–∏–∫",
                poster_url="https://picsum.photos/seed/film44/200/300",
                overview="–ì–µ—Ä–æ–∏ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è, —á—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è —â–µ–ª—á–∫–∞ –¢–∞–Ω–æ—Å–∞.",
                created_by=created_by_id
            ),
            Movie(
                title="–•—Ä–∞–±—Ä–æ–µ —Å–µ—Ä–¥—Ü–µ",
                year=1995,
                rating=8.3,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film45/200/300",
                overview="–®–æ—Ç–ª–∞–Ω–¥—Å–∫–∏–π –≤–æ–∏–Ω –£–∏–ª—å—è–º –£–æ–ª–ª–µ—Å –ø–æ–¥–Ω–∏–º–∞–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–π –∫–æ—Ä–æ–Ω—ã.",
                created_by=created_by_id
            ),
            Movie(
                title="–õ–∏—Ü–∞ —Å–æ —à—Ä–∞–º–∞–º–∏",
                year=1983,
                rating=8.3,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film46/200/300",
                overview="–ò–º–º–∏–≥—Ä–∞–Ω—Ç –¢–æ–Ω–∏ –ú–æ–Ω—Ç–∞–Ω–∞ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –Ω–∞ –≤–µ—Ä—à–∏–Ω—É –∫—Ä–∏–º–∏–Ω–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞ –ú–∞–π–∞–º–∏.",
                created_by=created_by_id
            ),
            Movie(
                title="–†–µ–∫–≤–∏–µ–º –ø–æ –º–µ—á—Ç–µ",
                year=2000,
                rating=8.3,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film47/200/300",
                overview="–ò—Å—Ç–æ—Ä–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ª—é–¥–µ–π, —á—å–∏ –º–µ—á—Ç—ã —Ä–∞–∑—Ä—É—à–∞—é—Ç—Å—è –ø–æ–¥ —Ç—è–∂–µ—Å—Ç—å—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.",
                created_by=created_by_id
            ),
            Movie(
                title="–ü–æ–¥ –ø–æ–∫—Ä–æ–≤–æ–º –Ω–æ—á–∏",
                year=2016,
                rating=7.5,
                genre="–¢—Ä–∏–ª–ª–µ—Ä",
                poster_url="https://picsum.photos/seed/film48/200/300",
                overview="–ì–µ—Ä–æ–∏–Ω—è —á–∏—Ç–∞–µ—Ç –º—Ä–∞—á–Ω—ã–π —Ä–æ–º–∞–Ω –±—ã–≤—à–µ–≥–æ –º—É–∂–∞, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Ä–∞–∂–∞–µ—Ç –∏—Ö –ø—Ä–æ—à–ª–æ–µ.",
                created_by=created_by_id
            ),
            Movie(
                title="–ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ (—Å–æ–≤–µ—Ç—Å–∫–∞—è —ç–∫—Ä–∞–Ω–∏–∑–∞—Ü–∏—è)",
                year=1969,
                rating=7.9,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film49/200/300",
                overview="–≠–∫—Ä–∞–Ω–∏–∑–∞—Ü–∏—è —Ä–æ–º–∞–Ω–∞ –î–æ—Å—Ç–æ–µ–≤—Å–∫–æ–≥–æ –æ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–∏, —Ä–∞—Å–∫–∞—è–Ω–∏–∏ –∏ –ø–æ–∏—Å–∫–µ —Å–º—ã—Å–ª–∞.",
                created_by=created_by_id
            ),
            Movie(
                title="–ù–µ—Ñ—Ç—å",
                year=2007,
                rating=8.1,
                genre="–î—Ä–∞–º–∞",
                poster_url="https://picsum.photos/seed/film50/200/300",
                overview="–ê–º–±–∏—Ü–∏–æ–∑–Ω—ã–π –Ω–µ—Ñ—Ç—è–Ω–∏–∫ —Å—Ç—Ä–æ–∏—Ç –∏–º–ø–µ—Ä–∏—é –∏ —Ç–µ—Ä—è–µ—Ç –æ—Å—Ç–∞—Ç–∫–∏ —á–µ–ª–æ–≤–µ—á–Ω–æ—Å—Ç–∏.",
                created_by=created_by_id
            ),
        ]
        
         # –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∏–ª—å–º—ã –≤ –ë–î
        session.add_all(initial_movies)
        session.commit()
        
        # –°–æ–∑–¥–∞–µ–º –ø–æ–¥–±–æ—Ä–∫–∏ –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
        picks_data = [
            {"name": "–•–∏—Ç—ã", "slug": "hits", "description": "–°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–ª—å–º—ã"},
            {"name": "–ù–æ–≤–∏–Ω–∫–∏", "slug": "new", "description": "–ù–æ–≤—ã–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è"},
            {"name": "–ö–ª–∞—Å—Å–∏–∫–∞", "slug": "classic", "description": "–í–µ–ª–∏–∫–∏–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —Ñ–∏–ª—å–º—ã"},
        ]
        
        picks = {}
        for pick_data in picks_data:
            pick = session.query(Pick).filter(Pick.slug == pick_data["slug"]).first()
            if not pick:
                pick = Pick(**pick_data)
                session.add(pick)
                session.commit()
            picks[pick.slug] = pick
        
        # –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∏–ª—å–º—ã –≤ –ø–æ–¥–±–æ—Ä–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–µ–≥–æ —Å–ø–∏—Å–∫–∞
        movie_picks = [
            (1, ["hits", "classic"]),     # –ü–æ–±–µ–≥ –∏–∑ –®–æ—É—à–µ–Ω–∫–∞
            (2, ["hits"]),                # –¢—ë–º–Ω—ã–π —Ä—ã—Ü–∞—Ä—å
            (3, ["hits", "new"]),         # –ù–∞—á–∞–ª–æ
            (4, ["hits", "new"]),         # –ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä
            (5, ["classic"]),             # –§–æ—Ä—Ä–µ—Å—Ç –ì–∞–º–ø
            (6, ["classic"]),             # –ú–∞—Ç—Ä–∏—Ü–∞
            (7, ["new"]),                 # –û–¥–Ω–∞–∂–¥—ã –≤‚Ä¶ –ì–æ–ª–ª–∏–≤—É–¥–µ
            (8, ["hits", "new"]),         # –ü–∞—Ä–∞–∑–∏—Ç—ã
            (9, ["new"]),                 # –ë–µ–≥—É—â–∏–π –ø–æ –ª–µ–∑–≤–∏—é 2049
            (10, ["classic"]),            # –ö—Ä–∏–º–∏–Ω–∞–ª—å–Ω–æ–µ —á—Ç–∏–≤–æ
            (11, ["classic", "hits"]),    # –ö—Ä—ë—Å—Ç–Ω—ã–π –æ—Ç–µ—Ü
            (12, ["classic"]),            # –ö—Ä—ë—Å—Ç–Ω—ã–π –æ—Ç–µ—Ü 2
            (13, ["classic", "hits"]),    # –°–ø–∏—Å–æ–∫ –®–∏–Ω–¥–ª–µ—Ä–∞
            (14, ["hits", "classic"]),    # –ó–µ–ª—ë–Ω–∞—è –º–∏–ª—è
            (15, ["hits", "classic"]),    # –í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü: –ë—Ä–∞—Ç—Å—Ç–≤–æ –ö–æ–ª—å—Ü–∞
            (16, ["classic"]),            # –í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü: –î–≤–µ –∫—Ä–µ–ø–æ—Å—Ç–∏
            (17, ["hits", "classic"]),    # –í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü: –í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ—Ä–æ–ª—è
            (18, ["classic"]),            # –ë–æ–π—Ü–æ–≤—Å–∫–∏–π –∫–ª—É–±
            (19, ["hits"]),               # –ü–∏—Ä–∞—Ç—ã –ö–∞—Ä–∏–±—Å–∫–æ–≥–æ –º–æ—Ä—è
            (20, ["classic"]),            # –ì–ª–∞–¥–∏–∞—Ç–æ—Ä
            (21, ["classic", "hits"]),    # –¢–∏—Ç–∞–Ω–∏–∫
            (22, ["classic"]),            # –ò–Ω–¥–∏–∞–Ω–∞ –î–∂–æ–Ω—Å
            (23, ["classic"]),            # –ù–∞–∑–∞–¥ –≤ –±—É–¥—É—â–µ–µ
            (24, ["classic", "hits"]),    # –¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä 2
            (25, ["classic"]),            # –ß—É–∂–æ–π
            (26, ["classic"]),            # –ß—É–∂–∏–µ
            (27, ["hits"]),               # –ì–æ—Ä–æ–¥ –ë–æ–≥–∞
            (28, ["classic"]),            # –ö—Ä–∞—Å–æ—Ç–∞ –ø–æ-–∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏
            (29, ["classic"]),            # –ë–æ–ª—å—à–æ–π –õ–µ–±–æ–≤—Å–∫–∏
            (30, ["hits"]),               # –ê–º–µ–ª–∏
            (31, ["classic"]),            # –ú–æ–ª—á–∞–Ω–∏–µ —è–≥–Ω—è—Ç
            (32, ["classic", "hits"]),    # –°–µ–º—å
            (33, ["hits"]),               # –ü—Ä–µ—Å—Ç–∏–∂
            (34, ["hits"]),               # –û—Å—Ç—Ä–æ–≤ –ø—Ä–æ–∫–ª—è—Ç—ã—Ö
            (35, ["classic"]),            # –í –¥–∂–∞–∑–µ —Ç–æ–ª—å–∫–æ –¥–µ–≤—É—à–∫–∏
            (36, ["classic"]),            # –¢–∞–∫—Å–∏—Å—Ç
            (37, ["classic"]),            # –ü—Ä–æ–ª–µ—Ç–∞—è –Ω–∞–¥ –≥–Ω–µ–∑–¥–æ–º –∫—É–∫—É—à–∫–∏
            (38, ["new"]),                # –õ–∞-–õ–∞ –õ–µ–Ω–¥
            (39, ["hits", "new"]),        # –ë–µ–∑—É–º–Ω—ã–π –ú–∞–∫—Å: –î–æ—Ä–æ–≥–∞ —è—Ä–æ—Å—Ç–∏
            (40, ["new"]),                # –°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å
            (41, ["new"]),                # –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
            (42, ["new"]),                # –í—ã–∂–∏–≤—à–∏–π
            (43, ["hits"]),               # –î–∂–∞–Ω–≥–æ –æ—Å–≤–æ–±–æ–∂–¥—ë–Ω–Ω—ã–π
            (44, ["hits", "new"]),        # –ú—Å—Ç–∏—Ç–µ–ª–∏: –§–∏–Ω–∞–ª
            (45, ["classic"]),            # –•—Ä–∞–±—Ä–æ–µ —Å–µ—Ä–¥—Ü–µ
            (46, ["classic"]),            # –õ–∏—Ü–∞ —Å–æ —à—Ä–∞–º–∞–º–∏
            (47, ["hits"]),               # –†–µ–∫–≤–∏–µ–º –ø–æ –º–µ—á—Ç–µ
            (48, ["new"]),                # –ü–æ–¥ –ø–æ–∫—Ä–æ–≤–æ–º –Ω–æ—á–∏
            (49, ["classic"]),            # –ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ
            (50, ["hits"]),               # –ù–µ—Ñ—Ç—å
        ]
        
        for movie_id, pick_slugs in movie_picks:
            for slug in pick_slugs:
                pick = picks.get(slug)
                if pick:
                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –ª–∏ —É–∂–µ —Ñ–∏–ª—å–º –≤ —ç—Ç—É –ø–æ–¥–±–æ—Ä–∫—É
                    existing = session.query(MoviePick).filter(
                        MoviePick.movie_id == movie_id,
                        MoviePick.pick_id == pick.id
                    ).first()
                    if not existing:
                        movie_pick = MoviePick(movie_id=movie_id, pick_id=pick.id)
                        session.add(movie_pick)
        
        session.commit()
        
        logger.info(f"‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ {len(initial_movies)} —Ñ–∏–ª—å–º–æ–≤")
        logger.info("‚úÖ –ü–æ–¥–±–æ—Ä–∫–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã")
        
    except IntegrityError as e:
        session.rollback()
        logger.warning(f"‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç: {e}")
    except Exception as e:
        session.rollback()
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: {e}")
        raise
    finally:
        session.close()

async def load_initial_data():
    """–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"""
    try:
        load_initial_movies()
    except Exception as e:
        logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ: {e}")

# –¢–∞–∫–∂–µ —Å–æ–∑–¥–∞–¥–∏–º —Å–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ä–µ—Ü–µ–Ω–∑–∏–π
def add_test_reviews():
    """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ä–µ—Ü–µ–Ω–∑–∏–π"""
    session = SessionLocal()
    try:
        from app.models.reviews import Review
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Ä–µ—Ü–µ–Ω–∑–∏–∏
        review_count = session.query(Review).count()
        
        if review_count > 0:
            logger.info(f"‚úÖ –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ –µ—Å—Ç—å {review_count} —Ä–µ—Ü–µ–Ω–∑–∏–π")
            return
        
        logger.info("üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ä–µ—Ü–µ–Ω–∑–∏–π...")
        
        # –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        users = session.query(User).limit(3).all()
        if not users:
            logger.warning("‚ö†Ô∏è –ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Ü–µ–Ω–∑–∏–π")
            return
        
        # –ü–æ–ª—É—á–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∏–ª—å–º–æ–≤
        movies = session.query(Movie).limit(10).all()
        
        # –¢–µ—Å—Ç–æ–≤—ã–µ —Ä–µ—Ü–µ–Ω–∑–∏–∏
        test_reviews = [
            {
                "text": "–§–∏–ª—å–º –æ —Å–∏–ª–µ –Ω–∞–¥–µ–∂–¥—ã –∏ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–π –º—è–≥–∫–æ –ø–æ–¥–≤–æ–¥–∏—Ç –∫ –º–æ—â–Ω–æ–º—É –∫–∞—Ç–∞—Ä—Å–∏—Å—É –∏ –¥–æ–ª–≥–æ –Ω–µ –æ—Ç–ø—É—Å–∫–∞–µ—Ç –ø–æ—Å–ª–µ —Ñ–∏–Ω–∞–ª–∞.",
                "rating": 9.5,
                "author_name": "–ö–∏–Ω–æ–º–∞–Ω"
            },
            {
                "text": "–û–¥–∏–Ω –∏–∑ —Ç–µ—Ö —Ä–µ–¥–∫–∏—Ö —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –¥—É—à–µ–≤–Ω–æ—Å—Ç—å –∏ –¥—Ä–∞–º–∞—Ç–∏–∑–º –∏–¥–µ–∞–ª—å–Ω–æ —É—Ä–∞–≤–Ω–æ–≤–µ—à–µ–Ω—ã.",
                "rating": 9.0,
                "author_name": "–ö—Ä–∏—Ç–∏–∫"
            },
            {
                "text": "–ù–æ–ª–∞–Ω –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Å—É–ø–µ—Ä–≥–µ—Ä–æ–π—Å–∫–∏–π —Ñ–∏–ª—å–º –≤ –º—Ä–∞—á–Ω—É—é –∫—Ä–∏–º–∏–Ω–∞–ª—å–Ω—É—é –¥—Ä–∞–º—É —Å –æ–¥–Ω–∏–º –∏–∑ –ª—É—á—à–∏—Ö –∑–ª–æ–¥–µ–µ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∫–∏–Ω–æ.",
                "rating": 9.2,
                "author_name": "–†–µ—Ü–µ–Ω–∑–µ–Ω—Ç"
            },
            {
                "text": "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –±–ª–æ–∫–±–∞—Å—Ç–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∑—Ä–∏—Ç–µ–ª—é —Å–æ–±—Ä–∞—Ç—å –≥–æ–ª–æ–≤–æ–ª–æ–º–∫—É –∏–∑ —Å–Ω–æ–≤ –∏ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π.",
                "rating": 8.8,
                "author_name": "–ö–∏–Ω–æ–æ–±–æ–∑—Ä–µ–≤–∞—Ç–µ–ª—å"
            },
            {
                "text": "–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –¥—Ä–∞–º–∞ –æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –ª—é–±–≤–∏ –∏ —Ü–µ–Ω–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, —Å–æ–≤–º–µ—â–∞—é—â–∞—è –Ω–∞—É—á–Ω—ã–µ –∏–¥–µ–∏ –∏ –∏—Å–∫—Ä–µ–Ω–Ω–∏–µ —ç–º–æ—Ü–∏–∏.",
                "rating": 8.7,
                "author_name": "–ù–∞—É—á–Ω—ã–π –∂—É—Ä–Ω–∞–ª–∏—Å—Ç"
            },
        ]
        
        reviews = []
        for i, movie in enumerate(movies):
            if i < len(test_reviews):
                review_data = test_reviews[i]
                user = users[i % len(users)]
                
                review = Review(
                    movie_id=movie.id,
                    user_id=user.id,
                    text=review_data["text"],
                    rating=review_data["rating"],
                    author_name=review_data["author_name"]
                )
                reviews.append(review)
        
        session.add_all(reviews)
        session.commit()
        
        logger.info(f"‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ {len(reviews)} —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ä–µ—Ü–µ–Ω–∑–∏–π")
        
    except Exception as e:
        session.rollback()
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Ü–µ–Ω–∑–∏–π: {e}")
    finally:
        session.close()

def load_all_initial_data():
    """–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"""
    load_initial_movies()
    add_test_reviews()

if __name__ == "__main__":
    load_all_initial_data()